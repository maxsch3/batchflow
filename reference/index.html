<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>API - Keras batchflow</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../css/custom.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "API";
    var mkdocs_page_input_path = "reference.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Keras batchflow</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../user_guide/">User guide</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Examples</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../titanic_example/">basic usage</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">API</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#batch-generators">Batch generators</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#batchgenerator-class">BatchGenerator class</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Keras batchflow</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>API</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/maxsch3/keras-batchflow/edit/master/docs/reference.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="batch-generators">Batch generators</h1>
<h2 id="batchgenerator-class">BatchGenerator class</h2>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>keras_batchflow.batch_generator.<strong>BatchGenerator</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">data</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">x_structure</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">y_structure=None</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">batch_transforms=None</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">batch_size=32</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">shuffle=True</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">train_mode=True</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>Basic batch generator. It is also a root class for all other batch generators.</p>
<p>This batch generator is a python generator object that returns new data at each new iteration. It is built
to b used in Keras's *_generator functions.</p>
<p>At every new iteration, it selects small chunk of a dataset and sends it to stack of transformers specified
at creation time. The generator makes sure that each datapoint will be selected once in one end-to-end walk</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong>data</strong> - a <em>Pandas dataframe</em> containing a dataset with both x and y</li>
<li><strong>x_structure</strong> - <em>tuple</em> or <em>list of tuples</em> - a structure describing mapping of dataframe columns to
    pre-fitted encoders and to keras model inputs. When model has multiple inputs, keras expects
    a list of numpy arrays as model X's. Each tuple is a mapping of a dataframe column to a relevant encoder.
    It has format <code>('column name', encoder)</code>. If encoder is None, the column values will be converted to numpy
    array and passed unchanged. If <code>(None, value)</code> is used, a new constant of value = <code>value</code> will be added
    to Batch generator's output.</li>
<li><strong>y_structure</strong> - (optional) <em>tuple</em> or <em>list of tuples</em> - a structure describing mapping of dataframe columns to
    pre-fitted encoders and to keras model output. When model has multiple output, keras expects
    a list of numpy arrays as model Y's. <strong>Default: None</strong>. Same rules and same format applies (see x_structure)</li>
<li><strong>batch_transforms</strong> - (optional) <em>a single instance or list of BatchTransformer</em> - a stack of batch transformers
    that are applied to batches before splitting to columns. These are useful when variables interact during
    transform. For example, in feature dropout, when only one randomly selected feature out of multiple input
    features have to be dropped. <strong>Default: None</strong></li>
<li><strong>batch_size</strong> - (optional) <em>int</em> max length of generated batch. The last batch of a dataset can be smaller
    if total size of dataframe is not multiple of a batch_size. <strong>Default: 32</strong></li>
<li><strong>shuffle</strong> - (optional) <em>bool</em>, if true, the input dataframe is shuffled before each new epoch.
    <strong>Default: False</strong></li>
<li><strong>train_mode</strong> - (optional) <em>bool</em>. If true, both X and Y are returned, otherwise only X is returned</li>
</ul></div>
</div>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>keras_batchflow.batch_generator.<strong>TripletPKGenerator</strong></code><span class="autodoc-punctuation">(</span><em class="autodoc-param">data</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">triplet_label</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">classes_in_batch</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">samples_per_class</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">x_structure</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">y_structure=None</em><span class="autodoc-punctuation">, </span><em class="autodoc-param">**kwargs</em><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>This class implements a batch generator for generic triplet network described in this
<a href="https://arxiv.org/abs/1703.07737">paper</a>
TODO: add more details</p></div>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../titanic_example/" class="btn btn-neutral" title="basic usage"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/maxsch3/keras-batchflow/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../titanic_example/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>

</body>
</html>
